<script src="https://unpkg.com/frappe-charts@1.2.4/dist/frappe-charts.min.iife.js"></script>


<script>

    tickerData = {}
    URL_TO_FETCH = 'http://localhost:3000/getJson'

    var xhr = new XMLHttpRequest();
    xhr.open("GET", URL_TO_FETCH, false);
    xhr.onload = function (e) {
    
        if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                tickerData = JSON.parse(xhr.responseText);
            } else {
                console.error(xhr.statusText);
            }
    }};

    xhr.onerror = function (e) {
        console.error(xhr.statusText);
    };
    xhr.send(null); 

</script>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport">
    <title>Sigma</title>
</head>
<body>
    <div id="chart"></div>
    <script>
        tickers = []
        tickerData.map((value,index) => {
            tickers.push(value[0].Ticker)
        })


        console.log(tickers)



        const data = {
        labels: tickers,

        datasets: [
            {
                name: "Some Data", type: "bar",
                values: [25, 40, 30]
            },
            {
                name: "Another Set", type: "line",
                values: [25, 50, -10]
            }
        ]
    }
    
    const chart = new frappe.Chart("#chart", {  // or a DOM element,
                                                // new Chart() in case of ES6 module with above usage
        title: "My Awesome Chart",
        data: data,
        type: 'axis-mixed', // or 'bar', 'line', 'scatter', 'pie', 'percentage'
        height: 250,
        colors: ['#7cd6fd', '#743ee2']
    })
    </script>

</body>
</html>